%{
  title: "How I Reduced the Size of My React Native App by 86%",
  tags: ~w(react-native expo),
  description: "How I converted my Expo app to vanilla React Native and reduced it's size from 25MB to 3.5MB."
}
---

I borrowed 25$ from my friend to start a Play Store Developer account
to put up my first app. I had already created the app, created the
assets and published it in the store. Nobody wants to download a todo
list app that costs 25mb of bandwidth and another 25 MB of storage
space.

So today I am going to share with you how I reduced the size of Tet from
25 MB to around 3.5 MB.


### Size Matters

Like any beginner, I wrote my app using Expo, the awesome React Native
platform that makes creating native apps a breeze. There is no native
setup, you write javascript and Expo builds the binaries for you.

I love everything about Expo except the size of the binaries. Each
binary weighs around 25 MB regardless of your app.

So the first thing I did was to migrate my existing Expo app to React
Native.


### Migrating to React Native

- `react-native init` a new project with the same name
- Copy the source files over from Expo project
- Install all dependencies of the Expo project except Expo specific
  libraries.
- Make neccesary adjustments to `app.json` file
- Copy over your `.git` folder into the new project.
- Download the signing key of your Android app from Expo using
  `exp fetch:android:keystore` and set it up
- Build and test your app

This reduces the size to around 7.5 MB, thin but we can go thinner.


### Reducing size of React Native App (Android)

This is what you have been waiting for, I know.

- Open up `android/app/build.gradle`
- Set `def enableProguardInReleaseBuilds = true` this would enable
  Progaurd to compress the Java Bytecode. This reduces the app size by
  a tad bit
- Set `def enableSeparateBuildPerCPUArchitecture = true` . Android
  devices support two major device artitectures armebi and x86. By
  default RN builds the native librariers for both these artitectures
  into the same apk.

Setting the last function creates two distinct apk in the build folder.
You have to upload both of this apk to Play Store and Google would take
care of distributing the app to the correct architectures.

Using this split generates version numbers for both apks in the order of
104856 and such. This is auto-generated by the build to avoid version
conflicts, so don't freak out (I did).

This split reduced the apk size from around 7MB to 3.5MB for arm and 5MB
for x86 respectively.




## Conclusion

So that's how you lose weight. Reducing the size of your app has many
added benefits, the best being more users will be willing to download
your app.

Be sure to check out <https://www.producthunt.com/posts/tet> if you feel
like seeing slim stuff.

